# nbrb_rates
Тестовое задание для "ОАО Банковский процессинговый центр" - "Получение и отображение курсов валют с сайта НБ РБ".


Описание:
В рамках тестового задания предлагается реализовать микросервис на любом из фреймворков Python или Java (можно на Core, без использования фреймворков).
Основной задачей данного микросервиса будет получение и отображение курсов валют с сайта НБ РБ.

Требуется создать 2 точки входа (endpoint) - формат данных, метод запросов, формат ответа и набор дополнительных данных запроса/ответа определяется разработчиком:

1. Endpoint с входящим параметром - дата.
Результат запроса - ответ, указывающий на корректность выполнения загрузки данных в разработанную систему о курсах за выбранную дату
API национального банка: https://www.nbrb.by/apihelp/exrates
Способ хранения информации (кэш, БД или иное - определяется разработчиком)

2. Endpoint с входящими параметрами - дата и код валюты
Результат запроса - информация о курсе валюты за указанный день

Ответ на каждый запрос требуется подписать добавлением CRC32 тела ответа в заголовок

Что хотелось бы видеть дополнительно:
- логирование запросов и ответов
- в запросе 2 - информацию об изменении курса по сравнению с предыдущим рабочим днем (вырос, уменьшился)
- описание разработанного протокола взаимодействия
- иструкцию по установке

Результат работы следует разместить в открытом репозитории любой из систем хранения исходных кродов: github, bitbucket



По заданию реализованы две точки входа:
1. rates/import_rates/ (http://127.0.0.1:8000/rates/import_rates/) - для загрузки курсов в систему. Это POST запрос, параметрами передается json словарь вида {'date_import': '2022-09-09'}
2. rates/get_rate/YYYY-MM-DD/CUR_CODE (http://127.0.0.1:8000/rates/get_rate/2022-09-09/USD/), т.е. можно ввести прямо в браузере, код валюты, это текстовый код, типа EUR

Установка
1. В начале установить miniconda, скачать можно здесь https://conda.io/en/latest/miniconda.html .
2. Запустить cmd.exe
3. Перейти в папку проекта nbrb_rates\nbrb_rates, например так cd D:\src\nbrb_rates\nbrb_rates\
4. Создать окружение conda - conda create -n nbrb_rates python=3.9.12
5. Активировать окружение - conda activate nbrb_rates
6. Установить пакеты - pip install -r requirements.txt
7. Запустить сервер - python manage.py runserver

После этого можно тестировать сервис:
1. В браузере зайти на страницу http://127.0.0.1:8000/rates/ и далее можно щелкать по ссылкам.
2. Либо для просмотра курса можно перейти по ссылке вида http://127.0.0.1:8000/rates/get_rate/2022-09-09/GBP/ . В систему загружены курсы с 1 августа 2022 года по 11 сентября 2022 года.
3. Для тестирования post запроса можно воспользоваться соответствующими плагинами либо выполнить код в питоне:

import requests  
date_import = {'date_import': '2022-07-02'}  
resp = requests.post('http://127.0.0.1:8000/rates/import_rates/', json=date_import)  
print(resp.json())  
